{% extends "base.html" %}

{% block content %}
    <title>Edit Flights</title>

    <h1>Edit Flights</h1>

    <form action="/select-flight" method="get">
        {% if direction == None %}
        <input type="hidden" name="direction" value="outward"/>
        {% elif direction == "outward" %}
        <input type="hidden" name="direction" value="return"/>
        {% endif %}

        <input type="hidden" name="departure" value="{{ departure }}"/>
        <input type="hidden" name="destination" value="{{ destination }}"/>
        <input type="hidden" name="departure_date" value="{{ departure_date }}"/>
        <input type="hidden" name="return_date" value="{{ return_date }}"/>
        <input type="hidden" name="person_count" value="{{ person_count }}"/>

        <table class="table">
            <tr>
                <th>Select Flight</th>
                <th>Departure City</th>
                <th>Destination City</th>
                <th>Departure Time</th>
                <th>Arrival Time</th>
                <th>Economy Price</th>
                <th>Business Price</th>
                <th>First Class Price</th>
                <th>Class</th>
                <th>Options</th>
            </tr>
            {% for flight in flights %}
            <tr>
                <td>
                    <input type="radio" name="flight_number" value="{{ flight['flight_number'] }}"/>
                </td>
                <td>{{ flight["departure_city"] }}</td>
                <td>{{ flight["destination_city"] }}</td>
                <td>{{ flight["departure_time"] }}</td>
                <td>{{ flight["arrival_time"] }}</td>
                <td>${{ flight["economy_price"] }}</td>
                <td>${{ flight["business_price"] }}</td>
                <td>${{ flight["first_class_price"] }}</td>
                <td>{{ flight["class"] }}</td>
                <td>
                    <a href="/edit-flight/{{ flight['flight_number'] }}">Edit</a>
                    <a href="#" onclick="confirmDelete('{{ flight['flight_number'] }}')">Delete</a>
                </td>
            </tr>
            {% endfor %}
        </table>

        <label for="edit_option">Select Flight to Edit:</label>
        <select name="edit_option" id="edit_option">
            {% for flight in flights %}
            <option value="{{ flight['flight_number'] }}">
                {{ flight["departure_city"] }} to {{ flight["destination_city"] }}
            </option>
            {% endfor %}
        </select>

        <input type="submit" value="Edit Flight"/>
    </form>

    <a href="/employee_home">Employee Home</a>

    <br><br><br><br>
    <a href="/logout">Logout.</a>

    <script>
        function confirmDelete(flightNumber) {
            if (confirm("Are you sure you want to delete this flight?")) {
                // Redirect to the delete URL if the user confirms
                window.location.href = "/delete-flight/" + flightNumber;
            }
        }
    </script>
</body>
{% endblock %}

